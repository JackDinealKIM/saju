# ğŸ”® AI Saju Master

ì´ˆë“±í•™ìƒë„ ì‰½ê²Œ ì´í•´í•˜ëŠ” ì¬ë¯¸ìˆëŠ” AI ì‚¬ì£¼íŒ”ì ë¶„ì„ ì„œë¹„ìŠ¤

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

### 1. ì‚¬ì£¼íŒ”ì ê³„ì‚° ë° ë¶„ì„
- â˜€ï¸ ì–‘ë ¥/ğŸŒ™ ìŒë ¥ ì…ë ¥ ì§€ì›
- ì •í™•í•œ ë§Œì„¸ë ¥ ê³„ì‚° (lunar-javascript ë¼ì´ë¸ŒëŸ¬ë¦¬ í™œìš©)
- ë…„ì£¼/ì›”ì£¼/ì¼ì£¼/ì‹œì£¼ ìë™ ê³„ì‚°

### 2. AI ìš´ì„¸ ë¶„ì„
- Gemini 2.5 Flash Liteë¥¼ í™œìš©í•œ ì‹¬ì¸µ ë¶„ì„
- ì´ˆë“±í•™ìƒë„ ì´í•´í•  ìˆ˜ ìˆëŠ” ì‰¬ìš´ ì„¤ëª…
- êµ¬ì¡°í™”ëœ JSON ì‘ë‹µìœ¼ë¡œ ì„¹ì…˜ë³„ ëª…í™•í•œ ì •ë³´ ì œê³µ:
  - ğŸŒŸ íƒ€ê³ ë‚œ ì„±ê²© (ì¥ì /ì£¼ì˜í• ì /ì„±ê²©íŠ¹ì§•)
  - ğŸ’¼ ì§ì—…ê³¼ ì¬ë¬¼ìš´ (ì–´ìš¸ë¦¬ëŠ” ì§ì—…/ëˆ ëª¨ìœ¼ëŠ” ë¹„ë²•)
  - ğŸ’• ì¸ê°„ê´€ê³„ì™€ ì‚¬ë‘ (ì—°ì• ìŠ¤íƒ€ì¼/ì´ìƒí˜•/ì¹œêµ¬ì‚¬ê·€ê¸° íŒ)
  - ğŸŠ 2026ë…„ ì‹ ë…„ ìš´ì„¸ (ë¶„ê¸°ë³„ ìš´ì„¸/í–‰ìš´ì˜ ìˆ«ì/ì¡°ì‹¬í•  ì‹œê¸°)
  - ğŸ“œ ì¸ìƒ ì¡°ì–¸ (ë§¤ì¼ ì‹¤ì²œí•  ìŠµê´€/ì˜¬í•´ ëª©í‘œ)

### 3. ì‹œê°ì  UI/UX
- ğŸ¨ í™”ë ¤í•œ ê·¸ë¼ë°ì´ì…˜ê³¼ ì»¬ëŸ¬í’€í•œ ë””ìì¸
- âœ¨ ë¶€ë“œëŸ¬ìš´ ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼ (bounce-in, slide-up, slide-in)
- ğŸ“± ë°˜ì‘í˜• ë””ìì¸ (ëª¨ë°”ì¼/íƒœë¸”ë¦¿/ë°ìŠ¤í¬í†±)
- ğŸ‘¦ğŸ‘§ ì´ëª¨ì§€ë¥¼ í™œìš©í•œ ì§ê´€ì  ì¸í„°í˜ì´ìŠ¤

### 4. ê³µìœ  ê¸°ëŠ¥
- ğŸ“¤ ê³ ìœ  URL ìƒì„± (nanoid 10ìë¦¬)
- ğŸ”— í´ë¦½ë³´ë“œ ë³µì‚¬ ì›í´ë¦­ ê³µìœ 
- ì¹œêµ¬ì—ê²Œ ì‰½ê²Œ ê³µìœ  ê°€ëŠ¥

### 5. íˆìŠ¤í† ë¦¬ ê¸°ë¡
- ğŸ“œ ìµœê·¼ 10ê°œ ë¶„ì„ ê²°ê³¼ ì €ì¥
- â° ìƒëŒ€ì  ì‹œê°„ í‘œì‹œ (Në¶„ ì „, Nì‹œê°„ ì „, Nì¼ ì „)
- ğŸ” ê³¼ê±° ë¶„ì„ ê²°ê³¼ ì¬í™•ì¸ ê°€ëŠ¥

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

### Frontend
- **SvelteKit 2** - ìµœì‹  í’€ìŠ¤íƒ í”„ë ˆì„ì›Œí¬
- **Tailwind CSS v4** - ìµœì‹  ìœ í‹¸ë¦¬í‹° CSS í”„ë ˆì„ì›Œí¬
- **shadcn-svelte** - ê³ í’ˆì§ˆ UI ì»´í¬ë„ŒíŠ¸
- **marked** - Markdown ë Œë”ë§ (fallbackìš©)

### Backend
- **Drizzle ORM** - Type-safe PostgreSQL ORM
- **PostgreSQL** - ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤
- **SvelteKit Server Actions** - ì„œë²„ì‚¬ì´ë“œ í¼ ì²˜ë¦¬

### AI & ê³„ì‚° ë¡œì§
- **Gemini 2.5 Flash Lite** - Google AI ëª¨ë¸
- **lunar-javascript** - ì •í†µ ë§Œì„¸ë ¥ ê³„ì‚° ë¼ì´ë¸ŒëŸ¬ë¦¬
- **nanoid** - ê³ ìœ  ID ìƒì„±

## ğŸ“¦ ì„¤ì¹˜ ë° ì‹¤í–‰

### 1. íŒ¨í‚¤ì§€ ì„¤ì¹˜
```bash
npm install
```

### 2. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
`.env` íŒŒì¼ì— ë‹¤ìŒ ë‚´ìš© ì¶”ê°€:
```env
DATABASE_URL=postgresql://saju_master:PASSWORD@HOST:5432/saju
GEMINI_API_KEY=your_gemini_api_key
GEMINI_API_URL=https://aiplatform.googleapis.com/v1/publishers/google/models/gemini-2.5-flash-lite:generateContent
```

### 3. ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •
PostgreSQL ì„œë²„ì— postgres ì‚¬ìš©ìë¡œ ì ‘ì†í•˜ì—¬ ê¶Œí•œ ì„¤ì •:
```bash
psql -h HOST -U postgres -d saju -f 001-db-permissions.sql
```

`001-db-permissions.sql` ìŠ¤í¬ë¦½íŠ¸ê°€ ìë™ìœ¼ë¡œ:
- public ìŠ¤í‚¤ë§ˆ ê¶Œí•œ ë¶€ì—¬
- saju_logs í…Œì´ë¸” ìƒì„±
- ì‹œí€€ìŠ¤ ê¶Œí•œ ì„¤ì •
- í…Œì´ë¸” ì†Œìœ ê¶Œ ë³€ê²½

### 4. ê°œë°œ ì„œë²„ ì‹¤í–‰
```bash
npm run dev
```

ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:5173 ì ‘ì†

### 5. í”„ë¡œë•ì…˜ ë¹Œë“œ
```bash
npm run build
npm run preview
```

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
saju/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ components/ui/          # shadcn-svelte UI ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ server/
â”‚   â”‚   â”‚   â”œâ”€â”€ db/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ schema.ts       # Drizzle DB ìŠ¤í‚¤ë§ˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ db.ts               # DB ì—°ê²°
â”‚   â”‚   â”‚   â””â”€â”€ gemini.ts           # Gemini API í†µí•©
â”‚   â”‚   â””â”€â”€ saju.ts                 # ì‚¬ì£¼ ê³„ì‚° ë¡œì§
â”‚   â””â”€â”€ routes/
â”‚       â”œâ”€â”€ +page.svelte            # ë©”ì¸ í˜ì´ì§€ (ì…ë ¥ í¼ + ê²°ê³¼)
â”‚       â”œâ”€â”€ +page.server.ts         # ë¶„ì„ Server Action
â”‚       â”œâ”€â”€ share/[id]/             # ê³µìœ  í˜ì´ì§€
â”‚       â”‚   â”œâ”€â”€ +page.svelte
â”‚       â”‚   â””â”€â”€ +page.server.ts
â”‚       â””â”€â”€ history/                # íˆìŠ¤í† ë¦¬ í˜ì´ì§€
â”‚           â”œâ”€â”€ +page.svelte
â”‚           â””â”€â”€ +page.server.ts
â”œâ”€â”€ drizzle/                        # DB ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼
â”œâ”€â”€ .env                            # í™˜ê²½ ë³€ìˆ˜
â”œâ”€â”€ 001-db-permissions.sql          # DB ê¶Œí•œ ì„¤ì • ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ PRD_CHECKLIST.md                # ê°œë°œ ì²´í¬ë¦¬ìŠ¤íŠ¸
â””â”€â”€ package.json
```

## ğŸ¯ ì£¼ìš” íŒŒì¼ ì„¤ëª…

### `/src/lib/saju.ts`
- ë§Œì„¸ë ¥ ê¸°ë°˜ ì‚¬ì£¼íŒ”ì ê³„ì‚°
- ìŒë ¥/ì–‘ë ¥ ë³€í™˜ (lunar-javascript)
- ì²œê°„/ì§€ì§€ ë§¤í•‘
- ì‹œê°„ëŒ€ë³„ ì‹œì£¼ ê³„ì‚°

### `/src/lib/server/gemini.ts`
- Gemini API í˜¸ì¶œ ë° ì‘ë‹µ ì²˜ë¦¬
- JSON íŒŒì‹± ë° ì •ì œ (sanitizeJsonString)
- êµ¬ì¡°í™”ëœ í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿
- 2026ë…„ ì‹ ë…„ ìš´ì„¸ ë™ì  ìƒì„±

### `/src/routes/+page.svelte`
- ì´ˆë“±í•™ìƒ ì¹œí™”ì  ì…ë ¥ í¼
- ì„±ë³„/ë‹¬ë ¥ ì¢…ë¥˜ ë¹„ì£¼ì–¼ ì„ íƒ
- êµ¬ì¡°í™”ëœ AI ë¶„ì„ ê²°ê³¼ í‘œì‹œ
- ê·¸ë¼ë°ì´ì…˜ ì¹´ë“œ ê¸°ë°˜ ë ˆì´ì•„ì›ƒ
- ê³µìœ  URL ë³µì‚¬ ê¸°ëŠ¥

### `/src/routes/+page.server.ts`
- í¼ ë°ì´í„° ê²€ì¦
- ì‚¬ì£¼ ê³„ì‚° ìˆ˜í–‰
- Gemini AI ë¶„ì„ ìš”ì²­
- DB ì €ì¥ (ì—ëŸ¬ ì‹œ ê³„ì† ì§„í–‰)
- ê³µìœ  ID ìƒì„±

## ğŸ¨ ë””ìì¸ íŠ¹ì§•

### ì»¬ëŸ¬ íŒ”ë ˆíŠ¸
- **Purple-Pink-Blue ê·¸ë¼ë°ì´ì…˜**: ë©”ì¸ ë¸Œëœë“œ ì»¬ëŸ¬
- **ì„¹ì…˜ë³„ ìƒ‰ìƒ ì½”ë”©**:
  - ğŸŸ¡ ì„±ê²© ë¶„ì„: Yellow-Orange
  - ğŸŸ¢ ì§ì—…/ì¬ë¬¼: Green-Teal
  - ğŸ©· ì¸ê°„ê´€ê³„: Pink-Rose
  - ğŸ”µ 2026 ìš´ì„¸: Indigo-Purple
  - ğŸŸ£ ì¸ìƒì¡°ì–¸: Purple-Indigo

### ì• ë‹ˆë©”ì´ì…˜
- **bounce-in**: í—¤ë” ë“±ì¥ (scale + opacity)
- **slide-up**: ì¹´ë“œ ìŠ¬ë¼ì´ë“œ ìƒìŠ¹
- **slide-in**: ë¦¬ìŠ¤íŠ¸ í•­ëª© ìˆœì°¨ ë“±ì¥
- **hover effects**: ì‚¬ì£¼íŒ”ì ì¹´ë“œ í™•ëŒ€ (scale-110)

## ğŸ”§ ê°œë°œ ìŠ¤í¬ë¦½íŠ¸

```bash
# ê°œë°œ ì„œë²„ ì‹¤í–‰
npm run dev

# TypeScript íƒ€ì… ì²´í¬
npm run check

# íƒ€ì… ì²´í¬ (watch ëª¨ë“œ)
npm run check:watch

# í”„ë¡œë•ì…˜ ë¹Œë“œ
npm run build

# í”„ë¡œë•ì…˜ ë¯¸ë¦¬ë³´ê¸°
npm run preview

# DB ë§ˆì´ê·¸ë ˆì´ì…˜ ìƒì„±
npm run db:generate

# DB ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰
npm run db:migrate

# DB ìŠ¤í‚¤ë§ˆ í‘¸ì‹œ (ê°œë°œìš©)
npm run db:push

# Drizzle Studio ì‹¤í–‰ (DB GUI)
npm run db:studio
```

## ğŸ“Š ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

### `saju_logs` í…Œì´ë¸”
```sql
CREATE TABLE saju_logs (
  id SERIAL PRIMARY KEY,
  name TEXT NOT NULL,
  birth_date TIMESTAMP WITH TIME ZONE NOT NULL,
  saju_text TEXT NOT NULL,
  ai_result TEXT NOT NULL,
  meta JSONB NOT NULL,  -- { gender, isLunar, shareId, originalInput, ... }
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW() NOT NULL
);
```

## âš™ï¸ í™˜ê²½ ë³€ìˆ˜

| ë³€ìˆ˜ | ì„¤ëª… | í•„ìˆ˜ |
|------|------|------|
| `DATABASE_URL` | PostgreSQL ì—°ê²° ë¬¸ìì—´ | âœ… |
| `GEMINI_API_KEY` | Google Gemini API í‚¤ | âœ… |
| `GEMINI_API_URL` | Gemini API ì—”ë“œí¬ì¸íŠ¸ | âš ï¸ (ê¸°ë³¸ê°’ ìˆìŒ) |

## ğŸš€ ë°°í¬ ê°€ì´ë“œ

### Vercel ë°°í¬
1. GitHub ì €ì¥ì†Œ ì—°ê²°
2. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
3. PostgreSQL ì¸ìŠ¤í„´ìŠ¤ ì—°ê²° (Vercel Postgres ë˜ëŠ” ì™¸ë¶€)
4. ìë™ ë°°í¬

### Docker ë°°í¬
```dockerfile
# Dockerfile ì˜ˆì‹œ
FROM node:20-alpine
WORKDIR /app
COPY package*.json ./
RUN npm ci
COPY . .
RUN npm run build
EXPOSE 3000
CMD ["node", "build"]
```

## ğŸ› ì•Œë ¤ì§„ ì´ìŠˆ ë° í•´ê²°

### 1. DB ê¶Œí•œ ì˜¤ë¥˜
**ì¦ìƒ**: `permission denied for schema public`

**í•´ê²°**: `001-db-permissions.sql` ì‹¤í–‰
```bash
psql -h HOST -U postgres -d saju -f 001-db-permissions.sql
```

### 2. Tailwind CSS í´ë˜ìŠ¤ ë¯¸ì ìš©
**ì¦ìƒ**: ìŠ¤íƒ€ì¼ì´ ì ìš©ë˜ì§€ ì•ŠìŒ

**í•´ê²°**: Tailwind v4 ì„¤ì • í™•ì¸
- `postcss.config.js`ì— `@tailwindcss/postcss` ì‚¬ìš©
- `app.css`ì— `@import "tailwindcss"` ì¶”ê°€

### 3. Gemini API íƒ€ì„ì•„ì›ƒ
**ì¦ìƒ**: 10ë¶„ í›„ ì‘ë‹µ ì—†ìŒ

**í•´ê²°**: `src/lib/server/gemini.ts`ì—ì„œ timeout ì¡°ì •
```typescript
timeout: 10 * 60 * 1000 // ê¸°ë³¸ 10ë¶„
```

## ğŸ“ ë¼ì´ì„¼ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” êµìœ¡ ë° ê°œì¸ ì‚¬ìš© ëª©ì ìœ¼ë¡œ ì œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.

## ğŸ™ í¬ë ˆë”§

- **lunar-javascript**: ì •í†µ ë§Œì„¸ë ¥ ê³„ì‚°
- **Gemini AI**: Googleì˜ ìƒì„±í˜• AI ëª¨ë¸
- **shadcn-svelte**: ê³ í’ˆì§ˆ UI ì»´í¬ë„ŒíŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬
- **SvelteKit**: Meta-framework
- **Tailwind CSS**: ìœ í‹¸ë¦¬í‹° CSS í”„ë ˆì„ì›Œí¬

---

**ğŸ¤– Powered by Gemini 2.5 Flash AI**

Made with â¤ï¸ for ì´ˆë“±í•™ìƒë“¤

# ì ‘ì†ë°©ë²•
```
http://localhost:5173/admin/login
admin1234
```# saju
