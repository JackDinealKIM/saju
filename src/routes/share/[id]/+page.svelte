<script lang="ts">
	import ResultV2 from '../../result-v2.svelte';
	import type { PageData } from './$types';

	export let data: PageData;

	// AI ë¶„ì„ ê²°ê³¼ íŒŒì‹± (ë¬¸ìì—´ì¸ ê²½ìš° JSONìœ¼ë¡œ ë³€í™˜)
	let analysis = data.result.aiAnalysis;
	if (typeof analysis === 'string') {
		try {
			analysis = JSON.parse(analysis);
			console.log('âœ… [Share] JSON íŒŒì‹± ì„±ê³µ');
		} catch (e) {
			console.error('âŒ [Share] JSON íŒŒì‹± ì‹¤íŒ¨:', e);
		}
	}

	console.log('ğŸ“Š [Share] ìµœì¢… ë¶„ì„ ë°ì´í„°:', analysis);
</script>

<svelte:head>
	<title>{data.result.name}ë‹˜ì˜ ì‚¬ì£¼ëª…ë¦¬ ë¶„ì„ - ë„ë‹´(é“è«‡)</title>
</svelte:head>

<ResultV2
	name={data.result.name}
	gender={data.result.gender}
	birthDate={data.result.birthDate}
	saju={data.result.saju}
	analysis={analysis}
/>
